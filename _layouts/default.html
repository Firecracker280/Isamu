<!DOCTYPE html>
<html lang="en">
  {% include head.html %}
  <body class="site-wrapper" data-barba="wrapper">
    <div class="sidebar-overlay"></div>
    <div class="sidebar">
      <div class="sidebar-close">&times;</div>
      {% include header.html %}
      <nav class="sidebar-nav">
        <ul>
          <li><a href="{{ site.baseurl }}/">Home</a></li>
          <li><a href="{{ site.baseurl }}/about">About</a></li>
          <li><a href="{{ site.baseurl }}/projects">Projects</a></li>
          <li><a href="{{ site.baseurl }}/blog">Blog</a></li>
          <li><a href="{{ site.baseurl }}/contact">Contact</a></li>
        </ul>
      </nav>
    </div>

    <main class="site-content" data-barba="container" data-barba-namespace="{{ page.title | slugify }}">
      <header class="top-header">
        <button class="menu-toggle" aria-label="Toggle Menu">
          <span></span>
          <span></span>
          <span></span>
        </button>
        <h1 class="site-title">{{ site.title }}</h1>
      </header>

      <div class="page-content">
        {{ content }}
      </div>

      {% include footer.html %}
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/2.9.7/barba.umd.js"></script>
    <script>
      // Menu toggle functionality
      document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.querySelector('.menu-toggle');
        const sidebar = document.querySelector('.sidebar');
        const sidebarOverlay = document.querySelector('.sidebar-overlay');
        const sidebarClose = document.querySelector('.sidebar-close');

        menuToggle.addEventListener('click', function() {
          sidebar.classList.toggle('active');
          sidebarOverlay.classList.toggle('active');
          document.body.classList.toggle('sidebar-open');
        });

        sidebarOverlay.addEventListener('click', function() {
          sidebar.classList.remove('active');
          sidebarOverlay.classList.remove('active');
          document.body.classList.remove('sidebar-open');
        });

        sidebarClose.addEventListener('click', function() {
          sidebar.classList.remove('active');
          sidebarOverlay.classList.remove('active');
          document.body.classList.remove('sidebar-open');
        });
      });

      // Barba.js page transitions
      barba.init({
        transitions: [{
          name: 'fade-transition',
          leave(data) {
            return gsap.to(data.current.container, {
              opacity: 0,
              duration: 0.5
            });
          },
          enter(data) {
            return gsap.from(data.next.container, {
              opacity: 0,
              duration: 0.5
            });
          }
        }]
      });
    </script>

    <style>
      /* Basic reset and variables */
      :root {
        --text-color: #000;
        --bg-color: #fff;
        --accent-color: #333;
        --sidebar-width: 280px;
        --transition-speed: 0.3s;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        color: var(--text-color);
        background-color: var(--bg-color);
        line-height: 1.6;
        overflow-x: hidden;
      }

      /* Site structure */
      .site-wrapper {
        position: relative;
        min-height: 100vh;
      }

      .site-content {
        padding: 1rem;
        transition: transform var(--transition-speed) ease;
      }

      /* Top header */
      .top-header {
        display: flex;
        align-items: center;
        padding: 1rem 0;
        margin-bottom: 2rem;
      }

      .site-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-left: 1rem;
      }

      /* Menu toggle button */
      .menu-toggle {
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        width: 2rem;
        height: 2rem;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 0;
        z-index: 10;
      }

      .menu-toggle span {
        width: 2rem;
        height: 0.25rem;
        background: var(--text-color);
        border-radius: 10px;
        transition: all 0.3s linear;
        position: relative;
        transform-origin: 1px;
      }

      /* Sidebar styles */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: var(--sidebar-width);
        height: 100%;
        background-color: var(--bg-color);
        border-right: 1px solid #eee;
        z-index: 1000;
        transform: translateX(-100%);
        transition: transform var(--transition-speed) ease;
        padding: 2rem;
        overflow-y: auto;
      }

      .sidebar.active {
        transform: translateX(0);
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
      }

      .sidebar-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        font-size: 1.5rem;
        cursor: pointer;
      }

      .sidebar-nav ul {
        list-style: none;
        margin-top: 2rem;
      }

      .sidebar-nav ul li {
        margin-bottom: 1.5rem;
      }

      .sidebar-nav ul li a {
        color: var(--text-color);
        text-decoration: none;
        font-size: 1.2rem;
        position: relative;
        transition: color 0.2s;
      }

      .sidebar-nav ul li a:hover {
        color: var(--accent-color);
      }

      .sidebar-nav ul li a:hover::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -5px;
        width: 100%;
        height: 2px;
        background-color: var(--accent-color);
      }

      /* Overlay */
      .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        opacity: 0;
        visibility: hidden;
        transition: opacity var(--transition-speed) ease;
      }

      .sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Page content */
      .page-content {
        max-width: 800px;
        margin: 0 auto;
        padding-bottom: 4rem;
      }

      /* Footer positioning */
      .site-content {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      .page-content {
        flex: 1;
      }

      /* Media queries */
      @media (min-width: 768px) {
        .site-content {
          padding: 2rem;
        }

        .top-header {
          margin-bottom: 3rem;
        }

        .site-title {
          font-size: 2rem;
        }
      }

      /* Animation keyframes for page transitions */
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }

      .fade-enter {
        animation: fadeIn 0.5s ease forwards;
      }

      .fade-leave {
        animation: fadeOut 0.5s ease forwards;
      }

      /* Additional utility classes */
      .body-sidebar-open {
        overflow: hidden;
      }

      /* Print styles */
      @media print {
        .sidebar, .menu-toggle, .sidebar-overlay {
          display: none;
        }
      }
    </style>
  </body>
</html>
